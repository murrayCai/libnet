<html><header>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="1.js"></script></header><body class="md-body"><div class="container md-container my-3"><div class="fs-1 border-bottom mb-3">apcu - 用户数据缓存插件
</div><br><div class="fs-2">假设 <font color='#FF0000"'>可自定义</font></div><li>php 安装目录： <span class="fw-bold">/root/php/bin/php74</span></li><li>php 超链接目录路径 : <span class="fw-bold">/usr/bin</span></li><li>源码目录 ： <span class="fw-bold">/root/php/packages</span></li><li>php.ini 路径 ： <span class="fw-bold">/root/php/bin/php74/lib/php.ini</span> &gt;&gt; <span><a href='http://php.msoft.com/php/extension/usage/php_source_compile.html' title='' class='md-link'><span class='md-link-description'>PHP源码编译</span></a></span></li><br><div class="fs-2">进入源码目录
</div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type">BASH</span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
cd /root/php/packages<BR></code></pre></div></div><span class="text-muted"></span></div><br><div class="fs-2">安装 php-apcu 和 apcu_bc 扩展
</div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type">BASH</span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
wget https://pecl.php.net/get/apcu-5.1.20.tgz<BR>tar xzf apcu-5.1.20.tgz && cd apcu-5.1.20<BR>phpize && ./configure && make && make install<BR>wget https://pecl.php.net/get/apcu_bc-1.0.5.tgz<BR>tar xzf apcu_bc-1.0.5.tgz  && cd apcu_bc-1.0.5<BR>phpize && ./configure<BR></code></pre></div></div><span class="text-muted"></span></div><br><div class="fs-2">修改 php.ini
</div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type"> /root/php/bin/php74/lib/php.ini &lt;&lt;&lt;</span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
echo -e "[apcu]\nextension = apcu.so" &gt;&gt; /root/php/bin/php74/lib/php.ini<BR>echo -e "[apc]\nextension = apc.so" &gt;&gt; /root/php/bin/php74/lib/php.ini<BR></code></pre></div></div><span class="text-muted"></span></div><br><div class="fs-2">安装测试
</div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type">bash</span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
php -i | grep apcu<BR>pkill php-fpm | php-fpm -R<BR></code></pre></div></div><span class="text-muted"></span></div><li>打开浏览器访问 ： http://192.168.174.128 &gt;&gt; 查看 <font color='#FF0000'> <span class="fw-bold">apcu</span> </font> 是否加载好</li><br><div class="fs-2">apcu相关函数
</div><li>CRUD操作 ： apcu<span class="fst-italic">add、apcu</span>fetch 、apcu<span class="fst-italic">delete 、apcu</span>exists、apcu_enabled</li><br><div class="fs-2">BASH汇总
</div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type"></span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
cd /root/php/packages<BR>wget https://pecl.php.net/get/apcu-5.1.20.tgz<BR>tar xzf apcu-5.1.20.tgz && cd apcu-5.1.20<BR>phpize && ./configure && make && make install<BR>cd /root/php/packages<BR>wget https://pecl.php.net/get/apcu_bc-1.0.5.tgz<BR>tar xzf apcu_bc-1.0.5.tgz  && cd apcu_bc-1.0.5<BR>phpize && ./configure<BR>echo -e "[apcu]\nextension = apcu.so" &gt;&gt; /root/php/bin/php74/lib/php.ini<BR>echo -e "[apc]\nextension = apc.so" &gt;&gt; /root/php/bin/php74/lib/php.ini<BR>php -i | grep apcu<BR>pkill php-fpm<BR>php-fpm -R<BR></code></pre></div></div><span class="text-muted"></span></div><br><div class="fs-2">PHP 代码下载 redis  vs  memcached   vs  apcu
</div><li>性能测试(10万次get/set操作)
</li><div class="md-none"><font color='#00ff00"'>此测试代码具有特殊性，结果仅作参考</font></div><div class="md-code">
    <div class="md-code-title">
        <span class="text-info mx-3 my-2 md-code-type"></span>
    </div>
    <div class="bg-dark text-white px-4 py-1 position-relative rounded">
        <div class="position-absolute top-50 end-0 translate-middle mx-3">
            <button type="button" class="btn btn-outline-secondary md_btn_copy" title="copy to clipboard" data-bs-original-title="copy to clipboard">copy</button>
        </div>
        <div><pre><code class="md_code_body">
需个人测试的请联系博主，索要基础性能测试代码<BR></code></pre></div></div><span class="text-muted"></span></div><br><div class="fs-2">参考资料
</div><div class="md-none">视频：<span><a href='https://www.19src.com/video/php/extension/usage/centos_install.php' title='apcu - 用户数据缓存插件' class='md-link'><span class='md-link-description'>apcu - 用户数据缓存插件</span></a></span></div><div class="md-none"><span><a href='https://www.php.net/manual/zh/book.apcu.php' title='' class='md-link'><span class='md-link-description'>apcu 官方文档</span></a></span></div><br><br><div class="fs-1 border-bottom mb-3">
</div><div class="md-none">上一节：<span><a href='http://php.msoft.com/php/extension/usage/memcached.html' title='' class='md-link'><span class='md-link-description'>memcached - sasl验证 内存nosql数据库</span></a></span></div><div class="md-none">下一节：<span><a href='http://php.msoft.com/php/extension/usage/v8js.html' title='' class='md-link'><span class='md-link-description'>v8js - php解析js代码</span></a></span></div></div>
<script type="text/javascript">
var clipboard = new ClipboardJS('.md_btn_copy',{
    target : function(trigger){
        return $(trigger).parent('div').next().find('.md_code_body').get(0);
    }
});
clipboard.on('success',function(e){
    var $_this = $(e.trigger);
    $_this.text("OK");
    setTimeout(function(){ $_this.text("copy"); },3000);
});
</script>
</body></html>
